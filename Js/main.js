function ibg(){var e=document.querySelectorAll(".ibg");e.length>0&&e.forEach((e=>{let t=e.querySelector("img").getAttribute("src");e.style.backgroundImage='url("'+t+'")'}))}ibg();const popupLinks=document.querySelectorAll(".popup-link"),body=document.querySelector("body"),lockPadding=document.querySelectorAll(".lock-padding");let unlock=!0;const timeout=500;if(popupLinks.length>0)for(let e=0;e<popupLinks.length;e++){const t=popupLinks[e];t.addEventListener("click",(function(e){const o=t.getAttribute("href").replace("#","");popupOpen(document.getElementById(o)),e.preventDefault()}))}const popupCloseIcon=document.querySelectorAll(".close-popup");if(popupCloseIcon.length>0)for(let e=0;e<popupCloseIcon.length;e++){const t=popupCloseIcon[e];t.addEventListener("click",(function(e){popupClose(t.closest(".popup")),e.preventDefault()}))}function popupOpen(e){if(e&&unlock){const t=document.querySelector(".popup.open");t?popupClose(t,!1):bodyLock(),e.classList.add("open"),e.addEventListener("mousedown",(function(e){e.target.closest(".popup__content")||popupClose(e.target.closest(".popup"))}))}}function popupClose(e,t=!0){if(unlock){try{e.classList.remove("open"),e.classList.contains("_complete")&&setTimeout((function(){e.classList.remove("_complete")}),500)}catch{}t&&bodyUnlock()}}function bodyLock(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";for(let t=0;t<lockPadding.length;t++){lockPadding[t].style.paddingRight=e}body.style.paddingRight=e,body.classList.add("_popup-lock"),unlock=!1,setTimeout((function(){unlock=!0}),500)}function bodyUnlock(){setTimeout((function(){if(lockPadding.length>0)for(let e=0;e<lockPadding.length;e++){lockPadding[e].style.paddingRight="0px"}body.style.paddingRight="0px",body.classList.remove("_popup-lock")}),500),unlock=!1,setTimeout((function(){unlock=!0}),500)}document.addEventListener("keydown",(function(e){if(27==e.which){popupClose(document.querySelector(".popup.open"))}}));var multi_choices={},multi_choices_singleform={},single_choices={};const myselect=()=>{const e=document.querySelectorAll(".multi-select");e!={}&&e.forEach((e=>{var t=new Choices(e,{removeItemButton:!0,placeholder:!0,placeholderValue:e.getAttribute("data-placeholder"),itemSelectText:"",noResultsText:"Не найдно",noChoicesText:"Нет элементов",renderSelectedChoices:"auto",resetScrollPosition:!1,allowHTML:!0});e.closest(".order-form__form_all")?(e.addEventListener("addItem",(function(e){get_selects_data()}),!1),e.addEventListener("removeItem",(function(e){get_selects_data()}),!1),multi_choices[e.name]=t):multi_choices_singleform[e.name]=t}));const t=document.querySelectorAll(".single-select");t!={}&&t.forEach((e=>{var t=new Choices(e,{itemSelectText:"",noResultsText:"Не найдно",noChoicesText:"Нет элементов",searchPlaceholderValue:e.getAttribute("data-placeholder"),allowHTML:!0});e.addEventListener("addItem",(function(e){filter_form.submit()}),!1),single_choices[e.name]=t}))};function submit_form(e,t,o,r){const l=new XMLHttpRequest,n=e.action;var s=dictToURI(Object.values(e).reduce(((e,t)=>(e[t.name]=t.value,e)),{}));l.responseType="json",l.open("POST",n,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.addEventListener("readystatechange",(()=>{if(4===l.readyState)if(200===l.status){if(e.closest(".popup-form").classList.add("_complete"),t&&localStorage.clear(),!isEmpty(o))for(var n in o)o[n].removeActiveItems();r.forEach((e=>{e.forEach((e=>{e.value=""}))}))}else{const t=e.querySelector(".popup-form__warning");t.classList.add("_active"),t.textContent="Что-то пошло не так, попробуйте позже."}})),l.send(s)}myselect();const order_form_all=document.querySelector(".order-form__form_all");if(null!=order_form_all){var order_els_all={inputs:order_form_all.querySelectorAll(".order-form__user-input"),textarea:"",choices:multi_choices,form:order_form_all};order_form_all.onsubmit=function(){return validate_form(order_els_all)&&submit_form(order_form_all,!0,order_els_all.choices,[order_els_all.inputs]),!1}}const order_form_single=document.querySelector(".order-form__form_single");if(null!=order_form_single){var order_els_single={inputs:order_form_single.querySelectorAll(".order-form__user-input"),textarea:"",choices:multi_choices_singleform,form:order_form_single};order_form_single.onsubmit=function(){return validate_form(order_els_single)&&submit_form(order_form_single,!1,order_els_single.choices,[order_els_single.inputs]),!1}}const feedback_form=document.querySelector(".feedback-form__form");if(null!=feedback_form){var feedback_els={inputs:feedback_form.querySelectorAll(".feedback-form__input"),textarea:feedback_form.querySelectorAll(".feedback-form__textarea"),choices:{},form:feedback_form};feedback_form.onsubmit=function(){return validate_form(feedback_els)&&submit_form(feedback_form,!1,feedback_els.choices,[feedback_els.inputs,feedback_els.textarea]),!1}}function validate_form(e){var t=!1;if(e.inputs.length>0&&e.inputs.forEach((e=>{""===e.value?(e.classList.add("warning"),t=!0):(e.classList.remove("warning"),"email"==e.type&&(validate_email(e.value)?e.classList.remove("warning"):(t=!0,e.classList.add("warning"))),"tel"==e.type&&(validate_phone(e.value)?e.classList.remove("warning"):(t=!0,e.classList.add("warning"))))})),e.textarea.length>0&&e.textarea.forEach((e=>{""===e.value?(e.classList.add("warning"),t=!0):e.classList.remove("warning")})),!isEmpty(e.choices)){const o=e.form.querySelector(".popup-form__warning");validate_choices(e.choices)?o.classList.remove("_active"):(o.classList.add("_active"),o.textContent="Ничего не выбрано!",t=!0)}return!t}function validate_email(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function validate_phone(e){if(e.length>=11&&e.length<=12){return/^[0-9\s+]*$/.test(String(e))}return!1}function validate_choices(e){var t=!0;for(const[o,r]of Object.entries(e))if(r.getValue(!0).length>0){t=!1;break}return!t}const url=new URL(document.location),order_filter=document.querySelectorAll("._order_filter"),order_input=document.querySelector("._order_by_input");order_filter.length>0&&order_filter.forEach((e=>{e.addEventListener("click",(function(t){var o=e.getAttribute("data-order_by").trim();o="-"===o.charAt(0)?o.replace("-",""):"-"+o,order_input.setAttribute("value",o),filter_form.submit()})),"-"!==e.getAttribute("data-order_by").trim().charAt(0)&&e.classList.add("_active")}));const filter_form=document.querySelector(".form_filter"),input_filter=document.querySelectorAll("._input-filter"),form_search=document.querySelector(".form-search");input_filter.length>0&&input_filter.forEach((e=>{e.addEventListener("keydown",(function(e){13==e.which&&filter_form.submit()})),e.onfocus=function(e){form_search.classList.add("_style_active")},e.onblur=function(e){form_search.classList.remove("_style_active")}}));const slidebar_btn=document.querySelector(".menu__icon"),slidebar=document.querySelector(".slidebar"),slidebar_body=document.querySelector(".slidebar__body"),slidebar_popup_btns=document.querySelectorAll("._slidebar-popup-btn");function open_slidebar(){document.body.classList.add("_slidebar-lock"),slidebar.classList.add("_active"),slidebar_body.classList.add("_active")}function close_slidebar(){slidebar_body.classList.remove("_active"),slidebar.classList.add("_off"),setTimeout((function(){slidebar.classList.remove("_off"),slidebar.classList.remove("_active"),document.body.classList.remove("_slidebar-lock")}),200)}slidebar_btn.addEventListener("click",open_slidebar),slidebar.addEventListener("mousedown",(function(e){e.target.closest(".slidebar__content")||close_slidebar()})),slidebar_popup_btns.forEach((e=>{e.addEventListener("click",(function(e){window.screen.width<=993&&close_slidebar()}))}));const slidebar_list=document.querySelector(".slidebar__list"),slidebar_footer=document.querySelector(".slidebar__footer");var min_height=slidebar_list.offsetHeight+slidebar_footer.offsetHeight+60;slidebar_body.style.minHeight=min_height+"px";let headerPadDown=19,headerPadUp=12,scrollPos=0;function animOnScroll(e){window.pageYOffset>scrollPos&&window.pageYOffset>90?(document.querySelector(".header__body").style.paddingTop=headerPadUp+"px",document.querySelector(".header__body").style.paddingBottom=headerPadUp+"px",document.querySelector(".header__container").classList.add("styleActive")):window.pageYOffset<90&&(document.querySelector(".header__body").style.paddingTop=headerPadDown+"px",document.querySelector(".header__body").style.paddingBottom=headerPadDown+"px",document.querySelector(".header__container").classList.remove("styleActive")),scrollPos=window.pageYOffset}window.addEventListener("scroll",animOnScroll),setTimeout((()=>{animOnScroll()}),300);var results={},loading=!0;function isEmpty(e){return 0===Object.keys(e).length}function get_selects_data(){if(!loading&&!isEmpty(multi_choices)){for(const[e,t]of Object.entries(multi_choices))results[e]=t.getValue(!0);localStorage.setItem("results",JSON.stringify(results))}}function get_data_from_localStorage(){try{if("results"in localStorage){retrievedObject=localStorage.getItem("results"),results=JSON.parse(retrievedObject);for(const[e,t]of Object.entries(multi_choices))t.setValue(results[e])}loading=!1}catch{localStorage.clear()}}function dictToURI(e){var t=[];for(var o in e)t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")}get_data_from_localStorage();const searchParams=url.searchParams;searchParams.delete("search_terms"),window.history.pushState({},"",url.toString());